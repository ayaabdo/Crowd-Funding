{% extends 'layout/base.html' %}
{% load static %}
{% block title %}
{{project_details.title}}
{% endblock %}
{% block styles %}
<link rel="stylesheet" href="{% static 'css/project-actions.css' %}" xmlns="http://www.w3.org/1999/html">
{% endblock %}
{% block header %}
 <div id="carouselExampleIndicators" class="carousel slide col-md-5 col-md-offset-3" data-ride="carousel" margin="auto">
  <ol class="carousel-indicators">
      {% for img in project_images %}
      {% if forloop.first %}
       <li data-target="#myCarousel" data-slide-to="{{ forloop.first }}" class="active"></li>
       {% else %}
      <li data-target="#myCarousel" data-slide-to="{{ forloop.counter }}"></li>
      {% endif %}
      {% endfor %}
  </ol>
  <div class="carousel-inner" role="listbox">
    {% for img in project_images %}
        {% if forloop.counter == 1 %}
             <div class="item active">
       {% else %}
            <div class="item">
        {% endif %}
            <img src="{{ img.image_path }}" style="height: 400px;">
            </div>
    {% endfor %}

  </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
 </div>
</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
{% endblock %}
{% block content %}
<div class="container text-left">
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Title</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.title}}" readonly>
</div>
<div class="form-group ">
<span style="font-weight: bold; font-size: 30px;">Details</span>
<textarea style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.details}}" readonly>
</textarea>
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Category</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.cat_id.cat_name}}" readonly>
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Tags</span>
{% for tag in project_details.tags.all %}
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{ tag.tag_name }}" readonly>
{% endfor %}
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Total Target</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.total_target}}" readonly>
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Total Donation</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.total_donation}}" readonly>
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">Start date</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.start_date}}" readonly>
</div>
<div class="form-group">
<span style="font-weight: bold; font-size: 30px;">End date</span>
<input style="font-size: 20px;" class="form-control" type="text" placeholder="{{project_details.end_date}}" readonly>
</div>

<div class="card-body">
<!-- comments -->
<h2>{{ comments.count }} comments</h2>

{% for comment in comments %}
<div class="comments" style="padding: 10px;">
<p class="font-weight-bold">
    {{comment.user_ID}} :
<span class=" text-muted font-weight-normal">
   {{ comment.comment }}
</span>
<a href="" data-commentid="{{ comment.id }}" data-comment="{{ comment.comment }}" class="btn btn-lg btn-secondary hidden-xs bounceInUp animated slow col-md-offset-2 open-AddBookDialog" data-toggle="modal" data-target="#commenteditModal">Edit</a>

</p>
<hr>
</div>
{% endfor %}
</div>
<div class="form-group">
    <form action="{% url 'report_project' project_details.id %}" method="POST">
       {% csrf_token %}
       <div id="myModal" class="modal">
          <div class="modal-content ">
            <span class="close">&times;</span>
             <label for="report-content" class="col-md-offset-3" style="font-weight: bold; font-size: 20px;">What is your complain ?</label><br>
            <textarea id="report-content" name="report-content" class="col-md-5 col-md-offset-3">
            </textarea><br><br><br>
            <button class="btn btn-primary col-md-offset-5" style="font-weight: bold; font-size: 20px; color: red;">Report</button>
          </div>
        </div>

      </form>
        <!--<a href="/project/{{ project_details.id }}/report">Report</a>-->
         <a style="font-weight: bold; font-size: 20px;" href="" class="btn btn-lg btn-secondary hidden-xs bounceInUp animated slow col-md-offset-2" data-toggle="modal" data-target="#commentModal">Comment</a>
  <a style="font-weight: bold; font-size: 20px;" href="" class="btn btn-lg btn-secondary hidden-xs bounceInUp animated slow col-md-offset-2" data-toggle="modal" data-target="#donateModal">DONATE NOW</a>
  <button id="myBtn" class="btn btn-lg btn-secondary hidden-xs bounceInUp animated slow col-md-offset-2" style="font-weight: bold; font-size: 20px;">Report</button>


</div>
</div>
{% endblock %}
{% block donate %}

       <!-- Donate Modal -->
    <div class="modal fade" id="donateModal" tabindex="-1" role="dialog" aria-labelledby="donateModalLabel" aria-hidden="true">

      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="donateModalLabel">DONATE NOW</h4>
          </div>
          <div class="modal-body">
                <form class="form-donation" action="{% url 'make-donation' project_details.id %}" method="POST">
                        {% csrf_token %}
                        <h3 class="title-style-1 text-center">Thank you for your donation <span class="title-under"></span>  </h3>
                        <div class="row">
                            <div class="form-group col-md-12 ">
                                <input type="text" class="form-control" id="amount" name="donation" placeholder="AMOUNT(â‚¬)">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" name="firstName" placeholder="First name*">
                            </div>
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" name="lastName" placeholder="Last name*">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" name="email" placeholder="Email*">
                            </div>
                            <div class="form-group col-md-6">
                                <input type="text" class="form-control" name="phone" placeholder="Phone">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <input type="text" class="form-control" name="address" placeholder="Address">
                            </div>
                        </div>
                        <div class="row">

                            <div class="form-group col-md-12">
                                <textarea cols="30" rows="4" class="form-control" name="note" placeholder="Additional note"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <button type="submit" class="btn btn-primary pull-right" name="donateNow" >DONATE NOW</button>
                            </div>

                        </div>
                </form>

          </div>
        </div>
      </div>
    </div> <!-- /.modal -->
{% endblock %}

{% block comment %}

<div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="commentModalLabel" aria-hidden="true">

      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="commentModalLabel">Comment</h4>
          </div>
          <div class="modal-body">
               <form class="form-comment" action="{% url 'comments_detail' project_details.id %}" method="POST">
                        {% csrf_token %}
                        <h3 class="title-style-1 text-center">Leave Comment here <span class="title-under"></span>  </h3>

                        <div class="row">

                            <div class="form-group col-md-12">
                                <textarea cols="30" rows="4" class="form-control" name="comment" placeholder="add comment"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <button type="submit" class="btn btn-primary pull-right" name="commentNow" >comment</button>
                            </div>

                        </div>
                </form>
          </div>
        </div>
      </div>

    </div> <!-- /.modal -->

    <div class="modal fade" id="commenteditModal" tabindex="-1" role="dialog" aria-labelledby="commenteditModalLabel" aria-hidden="true">

      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="commenteditModalLabel">Comment</h4>
          </div>
          <div class="modal-body">
               <form class="form-comment" action="{% url 'comment_edit' %}" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <h3 class="title-style-1 text-center">Edit your Comment <span class="title-under"></span>  </h3>

                        <div class="row">
                                    <input type="text" name="commentId" id="commentId" />

                            <div class="form-group col-md-12">
                                <textarea cols="30" rows="4" class="form-control" value="{{ thecomment.comment }}" name="comment"  id="commentedited"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-12">
                                <button type="submit" class="btn btn-primary pull-right" name="commentNow" >comment</button>
                            </div>

                        </div>
                </form>
          </div>
        </div>
      </div>

    </div> <!-- /.modal -->


{% endblock %}
{% block scripts %}
<script src="{% static 'js/project-actions.js' %}"></script>

<script>
    var elements = document.getElementsByClassName('open-AddBookDialog');
    for (var i=0; i<elements.length; i++) {
        elements[i].addEventListener("click", function(){
               var commentId = $(this).data('commentid');
             $(".modal-body #commentId").val( commentId );

               var thecomment = $(this).data('comment');
             $(".modal-body #commentedited").val( thecomment );

        });
    }
</script>


{% endblock %}